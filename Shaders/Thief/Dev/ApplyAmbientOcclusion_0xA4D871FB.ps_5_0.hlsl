Texture2D<float4> t0 : register(t0);

SamplerState s0_s : register(s0);

cbuffer cb2 : register(b2)
{
  float4 cb2[3];
}

cbuffer cb0 : register(b0)
{
  float4 cb0[5];
}

void main(
  float2 v0 : TEXCOORD0,
  out float4 o0 : SV_Target0)
{
  float4 r0,r1,r2,r3,r4;
  r0.xz = cb0[1].zz;
  r0.yw = float2(-0.379868001,-0.189934);
  r1.x = t0.Sample(s0_s, v0.xy).x;
  r1.y = 1 + -cb2[2].y;
  r1.x = r1.x + -r1.y;
  r1.x = min(-9.99999996e-013, r1.x);
  r1.x = -cb2[2].x / r1.x;
  r1.xz = float2(-0.999000013,0.00100000005) + r1.xx;
  r1.w = r1.z * cb0[4].z + cb0[3].x;
  r1.w = max(cb0[3].y, r1.w);
  r1.w = min(cb0[3].x, r1.w);
  r2.xy = r1.ww * r0.xy;
  r0.xy = r1.ww * r0.zw;
  r2.zw = float2(0.592539012,0.592539012) * r2.xx; // TODO: are these BT.601 weights?
  r2.xz = v0.xy + r2.zy;
  r2.yw = v0.xy + -r2.wy;
  r2.y = t0.Sample(s0_s, r2.yw).x;
  r2.y = r2.y + -r1.y;
  r2.y = min(-9.99999996e-013, r2.y);
  r3.y = -cb2[2].x / r2.y;
  r2.x = t0.Sample(s0_s, r2.xz).x;
  r2.x = r2.x + -r1.y;
  r2.x = min(-9.99999996e-013, r2.x);
  r3.x = -cb2[2].x / r2.x;
  r0.zw = float2(0.296269506,0.296269506) * r0.xx;
  r0.xz = v0.xy + r0.zy;
  r0.yw = v0.xy + -r0.wy;
  r0.y = t0.Sample(s0_s, r0.yw).x;
  r0.y = r0.y + -r1.y;
  r0.y = min(-9.99999996e-013, r0.y);
  r3.w = -cb2[2].x / r0.y;
  r0.x = t0.Sample(s0_s, r0.xz).x;
  r0.x = r0.x + -r1.y;
  r0.x = min(-9.99999996e-013, r0.x);
  r3.z = -cb2[2].x / r0.x;
  r0.xyzw = -r3.xyzw + r1.zzzz;
  r2.xyzw = cb0[1].wwww * r0.xyzw;
  r0.xyzw = cb0[3].wwww * r1.zzzz + -r0.xyzw;
  r2.xyzw = r2.xyzw / r1.zzzz;
  r2.xyzw = max(float4(-0.710349977,-0.710349977,-0.710349977,-0.710349977), r2.xyzw);
  r2.xyzw = min(float4(0.710349977,0.710349977,0.710349977,0.710349977), r2.xyzw);
  r2.xyzw = float4(0.710349977,0.710349977,0.710349977,0.710349977) + r2.xyzw;
  r2.xyzw = float4(0.703878343,0.703878343,0.703878343,0.703878343) * r2.xyzw;
  r3.x = cb0[3].w * r1.z;
  r0.xyzw = saturate(r0.xyzw / r3.xxxx);
  r0.xyzw = r0.xyzw * r0.xyzw;
  r0.xyzw = r2.xyzw * r0.xyzw;
  r0.xyzw = float4(0.100688502,0.100688502,0.100688502,0.100688502) * r0.xyzw;
  r0.xy = r0.yw + r0.xz;
  r0.xy = float2(0.104837999,0.104837999) + r0.xy;
  r2.xz = cb0[1].zz;
  r2.yw = float2(-0.480295986,-0.240147993);
  r4.xy = r2.xy * r1.ww;
  r2.xy = r2.zw * r1.ww;
  r4.zw = float2(-0.180978,-0.180978) * r4.xx;
  r0.zw = v0.xy + r4.zy;
  r3.yz = v0.xy + -r4.wy;
  r3.y = t0.Sample(s0_s, r3.yz).x;
  r3.y = r3.y + -r1.y;
  r3.y = min(-9.99999996e-013, r3.y);
  r4.y = -cb2[2].x / r3.y;
  r0.z = t0.Sample(s0_s, r0.zw).x;
  r0.z = r0.z + -r1.y;
  r0.z = min(-9.99999996e-013, r0.z);
  r4.x = -cb2[2].x / r0.z;
  r2.zw = float2(-0.0904890001,-0.0904890001) * r2.xx;
  r0.zw = v0.xy + r2.zy;
  r2.xy = v0.xy + -r2.wy;
  r2.x = t0.Sample(s0_s, r2.xy).x;
  r2.x = r2.x + -r1.y;
  r2.x = min(-9.99999996e-013, r2.x);
  r4.w = -cb2[2].x / r2.x;
  r0.z = t0.Sample(s0_s, r0.zw).x;
  r0.z = r0.z + -r1.y;
  r0.z = min(-9.99999996e-013, r0.z);
  r4.z = -cb2[2].x / r0.z;
  r2.xyzw = -r4.xyzw + r1.zzzz;
  r4.xyzw = cb0[1].wwww * r2.xyzw;
  r2.xyzw = cb0[3].wwww * r1.zzzz + -r2.xyzw;
  r2.xyzw = saturate(r2.xyzw / r3.xxxx);
  r2.xyzw = r2.xyzw * r2.xyzw;
  r4.xyzw = r4.xyzw / r1.zzzz;
  r4.xyzw = max(float4(-0.858232021,-0.858232021,-0.858232021,-0.858232021), r4.xyzw);
  r4.xyzw = min(float4(0.858232021,0.858232021,0.858232021,0.858232021), r4.xyzw);
  r4.xyzw = float4(0.858232021,0.858232021,0.858232021,0.858232021) + r4.xyzw;
  r4.xyzw = float4(0.582593024,0.582593024,0.582593024,0.582593024) * r4.xyzw;
  r2.xyzw = r4.xyzw * r2.xyzw;
  r0.xy = r2.xz * float2(0.0983060002,0.0983060002) + r0.xy;
  r0.xy = r2.yw * float2(0.0983060002,0.0983060002) + r0.xy;
  r2.xz = cb0[1].zz;
  r2.yw = float2(0.765070021,0.382535011);
  r4.xy = r2.xy * r1.ww;
  r2.xy = r2.zw * r1.ww;
  r4.zw = float2(0.0326980017,0.0326980017) * r4.xx;
  r0.zw = v0.xy + r4.zy;
  r3.yz = v0.xy + -r4.wy;
  r3.y = t0.Sample(s0_s, r3.yz).x;
  r3.y = r3.y + -r1.y;
  r3.y = min(-9.99999996e-013, r3.y);
  r4.y = -cb2[2].x / r3.y;
  r0.z = t0.Sample(s0_s, r0.zw).x;
  r0.z = r0.z + -r1.y;
  r0.z = min(-9.99999996e-013, r0.z);
  r4.x = -cb2[2].x / r0.z;
  r2.zw = float2(0.0163490009,0.0163490009) * r2.xx;
  r0.zw = v0.xy + r2.zy;
  r2.xy = v0.xy + -r2.wy;
  r2.x = t0.Sample(s0_s, r2.xy).x;
  r2.x = r2.x + -r1.y;
  r2.x = min(-9.99999996e-013, r2.x);
  r4.w = -cb2[2].x / r2.x;
  r0.z = t0.Sample(s0_s, r0.zw).x;
  r0.z = r0.z + -r1.y;
  r0.z = min(-9.99999996e-013, r0.z);
  r4.z = -cb2[2].x / r0.z;
  r2.xyzw = -r4.xyzw + r1.zzzz;
  r4.xyzw = cb0[1].wwww * r2.xyzw;
  r2.xyzw = cb0[3].wwww * r1.zzzz + -r2.xyzw;
  r2.xyzw = saturate(r2.xyzw / r3.xxxx);
  r2.xyzw = r2.xyzw * r2.xyzw;
  r4.xyzw = r4.xyzw / r1.zzzz;
  r4.xyzw = max(float4(-0.643115997,-0.643115997,-0.643115997,-0.643115997), r4.xyzw);
  r4.xyzw = min(float4(0.643115997,0.643115997,0.643115997,0.643115997), r4.xyzw);
  r4.xyzw = float4(0.643115997,0.643115997,0.643115997,0.643115997) + r4.xyzw;
  r4.xyzw = float4(0.777464747,0.777464747,0.777464747,0.777464747) * r4.xyzw;
  r2.xyzw = r4.xyzw * r2.xyzw;
  r0.xy = r2.xz * float2(0.0969834998,0.0969834998) + r0.xy;
  r0.xy = r2.yw * float2(0.0969834998,0.0969834998) + r0.xy;
  r2.xz = cb0[1].zz;
  r2.yw = float2(0.0647609979,0.0323804989);
  r4.xy = r2.xy * r1.ww;
  r2.xy = r2.zw * r1.ww;
  r4.zw = float2(-0.56852299,-0.56852299) * r4.xx;
  r0.zw = v0.xy + r4.zy;
  r3.yz = v0.xy + -r4.wy;
  r1.w = t0.Sample(s0_s, r3.yz).x;
  r1.w = r1.w + -r1.y;
  r1.w = min(-9.99999996e-013, r1.w);
  r4.y = -cb2[2].x / r1.w;
  r0.z = t0.Sample(s0_s, r0.zw).x;
  r0.z = r0.z + -r1.y;
  r0.z = min(-9.99999996e-013, r0.z);
  r4.x = -cb2[2].x / r0.z;
  r2.zw = float2(-0.284261495,-0.284261495) * r2.xx;
  r0.zw = v0.xy + r2.zy;
  r2.xy = v0.xy + -r2.wy;
  r1.w = t0.Sample(s0_s, r2.xy).x;
  r1.w = r1.w + -r1.y;
  r1.w = min(-9.99999996e-013, r1.w);
  r4.w = -cb2[2].x / r1.w;
  r0.z = t0.Sample(s0_s, r0.zw).x;
  r0.z = r0.z + -r1.y;
  r0.z = min(-9.99999996e-013, r0.z);
  r4.z = -cb2[2].x / r0.z;
  r2.xyzw = -r4.xyzw + r1.zzzz;
  r4.xyzw = cb0[3].wwww * r1.zzzz + -r2.xyzw;
  r2.xyzw = cb0[1].wwww * r2.xyzw;
  r2.xyzw = r2.xyzw / r1.zzzz;
  r2.xyzw = max(float4(-0.82011497,-0.82011497,-0.82011497,-0.82011497), r2.xyzw);
  r2.xyzw = min(float4(0.82011497,0.82011497,0.82011497,0.82011497), r2.xyzw);
  r2.xyzw = float4(0.82011497,0.82011497,0.82011497,0.82011497) + r2.xyzw;
  r2.xyzw = float4(0.609670579,0.609670579,0.609670579,0.609670579) * r2.xyzw;
  r3.xyzw = saturate(r4.xyzw / r3.xxxx);
  r3.xyzw = r3.xyzw * r3.xyzw;
  r2.xyzw = r3.xyzw * r2.xyzw;
  r0.xy = r2.xz * float2(0.0991834998,0.0991834998) + r0.xy;
  r0.xy = r2.yw * float2(0.0991834998,0.0991834998) + r0.xy;
  r0.xy = float2(-0.5,-0.5) + r0.xy;
  r0.xy = cb0[2].ww * r0.xy;
  r0.xy = saturate(r0.xy + r0.xy);
  r0.x = r0.x + r0.y;
  r0.x = min(1, r0.x);
  r1.x = saturate(r1.x);
  r0.y = saturate(r1.z * cb0[4].y + cb0[4].x);
  r0.x = r1.x * r0.x;
  r0.z = r0.x * r0.y;
  o0.w = -r0.x * r0.y + 1;
  o0.xyz = cb0[2].xyz * r0.zzz;
}